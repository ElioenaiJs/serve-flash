<!-- customer-products.component.html -->
<div class="example-container">
  <div class="example-sidenav-content">
    <div class="menu-container">
      <div class="flex flex-col gap-2">
        <h1 class="text-2xl md:text-3xl font-bold">Nuestro Menú</h1>
        <p class="text-gray-600">Explora nuestra selección de café, postres, bebidas y sandwiches.</p>
      </div>
    </div>

    <div class="overflow-x-auto pb-2">
      <div class="flex gap-2 min-w-max">
        @for (category of menuCategories; track category.title) {
          <button 
            mat-raised-button
            [color]="selectedCategory === category.title ? 'primary' : 'basic'"
            (click)="selectCategory(category.title)"
            class="px-4 py-2 flex items-center gap-2"
          >
            <mat-icon>{{category.icon}}</mat-icon>
            {{ category.title }}
          </button>
        }
      </div>
    </div>

    <div class="products-container">
      @for (product of filteredProducts; track product.id) {
        <div class="product-card">
          <mat-card class="example-card">
            <img 
              mat-card-image 
              [src]="product.imageUrl" 
              [alt]="product.title"
            >
            <mat-chip-option
              class="absolute top-2 right-2 !bg-primary !text-white"
              disabled
            >
              {{ product.category }}
            </mat-chip-option>
            <mat-card-content>
              <h3 class="text-lg font-semibold">{{ product.title }}</h3>
              <p class="text-gray-600 text-sm mt-1 line-clamp-2">{{ product.description }}</p>
            </mat-card-content>
            <mat-card-actions class="cutom-actions">
              <span>${{ product.price.toFixed(2) }}</span>
              <button
                mat-button
                [color]="addedItems[product.id] ? 'primary' : 'basic'"
                (click)="handleAddToCart(product)"
                [matTooltip]="addedItems[product.id] ? '¡Agregado al carrito!' : 'Agregar al carrito'"
              >
                @if (addedItems[product.id]) {
                  <mat-icon>check</mat-icon>
                  Agregado
                } @else {
                  <mat-icon>add</mat-icon>
                  Agregar
                }
              </button>
            </mat-card-actions>
          </mat-card>
        </div>
      }
    </div>
  </div>
</div>